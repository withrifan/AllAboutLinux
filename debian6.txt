konfigurasi dns
- apt install bind9 dnsutils
- cp /etc/bind/db.local /etc/bind/db.domain
- cp /etc/bind/db.127 /etc/bind/db.ip
- nano named.conf.local
zone "debianenam.com" {
type master;
file "/etc/bind/db.domain";
};
zone "10.168.192.in-addr.arpa" {
type master;
file "/etc/bind/db.ip";
};
- nano db.domain
@	IN	NS	debianenam.com.
@	IN	A	192.168.10.2
@	IN	MX	10	mail.debianenam.com.
mail	IN	A	192.168.10.2
proxy	IN	A	192.168.10.2
www	IN	A	192.168.10.2
- nano db.ip
@	IN	NS	debianenam.com.
2	IN	PTR	debianenam.com.
- nano named.conf.options
allow-query { any; };
forwarders {
  8.8.8.8;
};
dnssec-enable no;
dnssec-validation no;
- systemctl restart bind9
- nano /etc/resolv.conf
nameserver 192.168.10.2
- nslookup debianenam.com

konfigurasi web
- apt install apache2 
- cd /etc/apache2/sites-available
- cp 000-default.conf website.conf
- nano website.conf
servername www.debianenam.com
serveradmin webmaster@debianenam.com
documentroot /var/www/web
- mkdir/var/www/web/
- nano index.html
- cd /etc/apache2/sites-available
- a2ensite website.conf
- systemctl restart apache2

konfigurasi webmail
- apt install mariadb-server
- apt install postfix courier-imap courier-pop
pilih internet site
masukkan mail.debianlima.com
- maildirmake.dovecot /etc/skel/Maildir
- dpkg-reconfigure postfix
pada force synchronous update pilih yes
tambahkan 0.0.0.0/0
pilih ipv4
- nano /etc/postfix/main.cf
tambahkan di paling bawah
home_mailbox = Maildir/
- nano /etc/dovecot/dovecot.conf
listen = *
- nano /etc/dovecot/conf.d/10-auth.conf
disable_plaintext_auth = no
-nano /etc/dovecot/conf.d/10-mail.conf
hapus # di mail_location = maildir:~/Maildir
dan beri tanda # di mail_location = mbox
- systemctl restart postfix
- systemctl restart courier
- adduser tkjsatu
- adduser tkjdua
- mysql -u root -p
- grant all privileges on roundcube.* to tkj@mail.debianlima.com identified by ‘tkj’;
- flush privileges;
- quit; 
- mencoba kirim mail dari tkjsatu ke tkjdua
telnet mail.debianempat.com 25
mail from: tkjsatu@mail.debianempat.com
rcpt to: tkjdua@mail.debianempat.com
data
coba lagi
.
quit
- melihat email dari tkjdua
telnet mail.debianempat.com 110
user tkjdua
pass 2
retr 1
quit
- apt install roundcube
- nano /etc/roundcube/config.inc.php
masukkan domain dan ip serta hapus isi dari smtp user
- cd /etc/apache2/sites-available
- cp 000-default.conf webmail.conf
- nano webmail.conf
servername mail.debiantiga.com
documentroot /var/lib/roundcube
- a2ensite webmail.conf
- systemctl restart apache2
- systemctl restart postfix
- systemctl restart courier
- buka browser mail.debianenam.com

konfigurasi ssh keypair
- apt install openssh-server
- buka client 
ssh-keygen -t rsa
kosongin passpharse
- ssh-copy-id tkj@192.168.10.2

konfigurasi samba
- apt install samba
- mkdir /samba
- mkdir /samba/public
- mkdir /samba/data
- chmod -R 777 /samba/
- smbpasswd -a tkj
- nano /etc/samba/smb.conf
[public]
path = /samba/public
browseable = yes
writeable = yes
security = share
guest ok = yes
read only = no

[data]
path = /samba/data
browseable = yes
writeable = no
security = user
valid user = tkj
guest ok = no
read only = yes
#melarang file bertipe html
veto files =*html
- nano /samba/public/file-percobaan.txt
- systemctl restart smbd
- remote dari client smb://192.168.10.2

konfigurasi ftp 
- apt install proftpd
- remote pakai filezila
- mkdir /ftpuser
- nano /ftpuser/file.txt
- chmod 777 /ftpuser
- nano /etc/proftpd/proftpd.conf
- edit server name menjadi debianempat.com (opsional)
- ganti portnya 21 (opsional)
- hapus # di default root dan edit directory /ftpuser/
- hapus # pada <Anonymous /ftpuser>
- hapus # pada user dan group
- hapus # pada UserAlias
- hapus # pada RequireValidShell
- hapus # pada </Anonymous>
- systemctl restart proftpd

konfigurasi ntp
- apt install ntp ntpdate
- nano /etc/ntp.conf
server 127.127.1.0
fudge 127.127.1.0 stratum 1
dan tambahkan pada cryptographically authenticated
restrict 192.168.10.0 mask 255.255.255.0 nomodify notrap
- systemctl restart ntp
- pengujian ketik ntpq -p

konfigurasi vpn
- apt install pptpd
- nano /etc/pptpd.conf
localip 192.168.10.2
remoteip 192.168.2.3-100,192.168.2.254
- nano /etc/ppp/pptpd-options
hapus # domain dan ganti domainnya
di bagian bawah tambahkan
ms-dns 192.168.10.2
nobsdcomp
- nano /etc/ppp/chap-secrets
tambahkan clientnya tkj dan secretnya tkjvpn
- systemctl restart pptpd

konfigurasi ufw firewall
- apt install ufw
- ufw enable
- ufw status
- ufw allow from 192.168.10.1/24 to any port 53
- ufw allow from 192.168.10.1/24 to any port 80
- ufw allow from 192.168.10.1/24 to any port 433
- ufw allow from 192.168.10.1/24 to any port 3128

konfigurasi proxy
- apt install squid3
- nano /etc/squid/squid.conf
pada #Default:
cache_mgr webmaster ganti menjadi cache_mgr admin@proxy.debianlima.com
lalu pada #Default: 
visible_hostname is used if no specific ID is set. 
ganti menjadi visible_hostname debian
lalu pada http_access deny all tambahkan #
lalu pada acl CONNECT method CONNECT
di bawahnya tambahkan 
acl situs dstdomain "/etc/squid/situs.txt"
http_access deny situs
acl user src 192.168.2.0/24
http_access deny user
- nano /etc/squid/situs.txt
masukkan domain yang ingin diblokir
- systemctl restart squid
