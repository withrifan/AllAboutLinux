mikrotik adapter1 nat, adapter2 inet, adapter3 hostonly
debiantes3 adapter1 inet
windows7 adapter1 hostonly
windows10 host-only 

konfigurasi mikrotik tes3
- ip dhcp-client add interface=ether1 disable=no
- ip add add add=192.168.10.1/24 interface=ether2 disable=no
- ip add add add=192.168.2.1/24 interface=ether3 disable=no
- ip dns set allow-remote-request=yes 
- ip firewall nat add chain=srcnat out-interface=ether1 action=masquerade disable=no

konfigurasi dns
- apt install bind9 dnsutils
- cp /etc/bind/db.local /etc/bind/db.domain
- cp /etc/bind/db.127 /etc/bind/db.ip
- nano named.conf.local
zone "debiantiga.com" {
type master;
file "/etc/bind/db.domain";
};
zone "10.168.192.in-addr.arpa" {
type master;
file "/etc/bind/db.ip";
};
- nano db.domain
@	IN	A	debiantiga.com.
@	IN	A	192.168.10.2
@	IN	MX	10	mail.debiantiga.com
mail	IN	A	192.168.10.2
ntp	IN	A	192.168.10.2
- nano db.ip
2	IN	NS	debiantiga.com.
2	IN	PTR	debiantiga.com.
2	IN	PTR	mail.debiantiga.com.
2	IN	PTR	ntp.debiantiga.com.
- nano named.conf.options
allow-query { any; };
forwarders {
  8.8.8.8;
};
forward only;
dnssec-enable no;
dnssec-validation no;
- systemctl restart bind9
- nano /etc/resolv.conf
nameserver 192.168.10.2
- nslookup debiantiga.com
- nslookup mail.debiantiga.com
- nslookup ntp.debiantiga.com

konfigurasi webmail 
- apt install php mariadb-server
- apt install apache2
- apt install dovecot-imapd dovecot-pop3d postfix
pilih internet site
masukkan mail.debiantiga.com
- dpkg-reconfigure postfix
pada force synchronous update pilih yes
tambahkan 0.0.0.0/0
pilih ipv4
- nano /etc/postfix/main.cf
tambahkan di paling bawah
home_mailbox = Maildir/
- nano /etc/dovecot/dovecot.conf
listen = *
- nano /etc/dovecot/conf.d/10-auth.conf
disable_plaintext_auth = no
-nano /etc/dovecot/conf.d/10-mail.conf
hapus # di mail_location = maildir:~/Maildir
dan beri tanda # di mail_location = mbox
- maildirmake.dovecot /etc/skel/Maildir
- systemctl restart postfix
- systemctl restart dovecot
- adduser tkjsatu
- adduser tkjdua
- mysql -u root -p
- grant all privileges on roundcube.* to tkj@mail.debiantiga.com identified by ‘tkj’;
- flush privileges;
- quit; 
- apt install roundcube
- nano /etc/roundcube/config.inc.php
masukkan domain dan ip serta hapus isi dari smtp user
- cd /etc/apache2/sites-available
- cp 000-default.conf webmail.conf
- nano webmail.conf
servername mail.debiantiga.com
documentroot /var/lib/roundcube
- a2ensite webmail.conf
- systemctl restart apache2
- systemctl restart postfix
- systemctl restart dovecot
- buka browser mail.debiantiga.com

konfigurasi ssh
- apt install openssh-server
- nano /etc/ssh/sshd_config
tambahkan AllowUsers tkj@192.168.2.3
- systemctl restart ssh

konfigurasi vpn
- apt install pptd
- nano /etc/pptpd.conf
hapus tanda # pada localip dan remoteip
- nano /etc/ppp/chap-secrets
buat 2 user dan password untuk client vpnnya
- systemctl restart pptpd

konfigurasi ntp server
- apt install ntp ntpdate
- nano /etc/ntp.conf
server 127.127.1.0
fudge 127.127.1.0 stratum 1
dan tambahkan pada cryptographically authenticated
restrict 192.168.10.0 mask 255.255.255.0 nomodify notrap
- systemctl restart ntp
- pengujian ketik ntpq -p

anitaayu26,my,id
